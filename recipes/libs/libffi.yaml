inherit: [autotools, autoconf, patch]

metaEnvironment:
    PKG_VERSION: "3.5.2"
    PKG_LICENSE: "MIT"

checkoutSCM:
    scm: url
    url: ${GITHUB_MIRROR}/libffi/libffi/releases/download/v${PKG_VERSION}/libffi-${PKG_VERSION}.tar.gz
    digestSHA1: "2bd35b135b0eeb5c631e02422c9dbe786ddb626a"
    stripComponents: 1

checkoutDeterministic: True
checkoutScript: |
    patchApplySeries $<@libffi/*.diff@>

buildScript: |
   autotoolsBuild -s -Sa $1

multiPackage:
    dev:
        packageScript: autotoolsPackageDev
    tgt:
        packageScript: autotoolsPackageTgt
